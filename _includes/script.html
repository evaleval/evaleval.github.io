<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Move footnotes to sidebar dynamically
        const footnotes = document.querySelectorAll('.footnote-item');
        const footnoteContainer = document.getElementById('dynamic-footnotes');
        footnotes.forEach(fn => {
            const clone = fn.cloneNode(true);
            footnoteContainer.appendChild(clone);
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // MathJax processing
        if (typeof MathJax !== 'undefined') {
            MathJax.typesetPromise();
        }

        // Hamburger menu toggle
        const toggleBtn = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        if (toggleBtn && mobileMenu) {
            toggleBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
        }
    });
</script>
