---
layout: default
---

<!-- Collection Layout -->
<section class="py-20 px-6 bg-white">
  <div class="max-w-7xl mx-auto">

    <!-- Header -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 md:mb-0">{{ page.title }}</h2>
      {% if page.subtitle %}
        <div class="mono text-sm tracking-wider text-gray-500">{{ page.subtitle }}</div>
      {% endif %}
    </div>

    <!-- Projects Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% assign ordered_items = site[page.collection] | where_exp: "item", "item.order" | sort: 'order' %}
      {% if page.collection == "posts" %}
        {% assign unordered_items = site[page.collection] | where_exp: "item", "item.order == nil" | sort: 'date' | reverse %}
      {% else %}
        {% assign unordered_items = site[page.collection] | where_exp: "item", "item.order == nil" | sort: 'title' %}
      {% endif %}
      {% assign items = ordered_items | concat: unordered_items %}
      {% for item in items %}
        {% if item.published != false and item.exclude_from_collection != true %}
          <div class="project-card p-6 bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition-shadow duration-300">
            <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-6">
              {% case item.category %}
                {% when "Infrastructure" %}
                  <i class="fas fa-network-wired"></i>
                {% when "Research" %}
                  <i class="fas fa-flask"></i>
                {% when "Organization" %}
                  <i class="fas fa-users"></i>
                {% when "Tooling" %}
                  <i class="fas fa-tools"></i>
                {% when "Documentation" %}
                  <i class="fas fa-book"></i>
                {% when "Datasets" %}
                  <i class="fas fa-database"></i>
                {% else %}
                  <i class="fas fa-lightbulb"></i> <!-- Default icon -->
              {% endcase %}
            </div>

            <!-- Title -->
            <h3 class="text-xl font-bold">
              <a href="{% if item.custom_url %}{{ item.custom_url | relative_url }}{% else %}{{ item.url | relative_url }}{% endif %}" class="hover:text-blue-600">{{ item.title }}</a>
            </h3>

            <!-- Category Tag (spaced neatly below title) -->
            {% if item.category %}
              <div class="mt-2 mb-4">
                <span class="inline-block bg-gray-100 text-gray-600 text-xs font-medium px-3 py-1 rounded-full">
                  {{ item.category }}
                </span>
              </div>
            {% endif %}

            <!-- Event-specific fields (only for events collection) -->
            {% if page.collection == "events" %}
              {% if item.event_date %}
                <p class="text-gray-600 text-sm mb-2">
                  &#128197; {{ item.event_date | date: "%B %-d, %Y" }}
                </p>
              {% endif %}
              {% if item.location %}
                <p class="text-gray-600 text-sm mb-2">
                  &#128205; {{ item.location }}
                </p>
              {% endif %}
              {% if item.host %}
                <p class="text-gray-600 text-sm mb-4">
                  &#128101; {{ item.host }}
                </p>
              {% endif %}
            {% endif %}

            <!-- Description -->
            {% if item.description %}
              <p class="text-gray-600 text-sm mb-4">
                {{ item.description | strip_html | truncate: 200 }}
              </p>
            {% endif %}

            <!-- Team / Project Chairs -->
            {% if item.team %}
              <p class="text-xs text-gray-500 mb-4">
                <span class="font-semibold">Project Chairs:</span> {{ item.team }}
              </p>
            {% endif %}

            <!-- Event-specific link (only for events collection) -->
            {% if page.collection == "events" %}
              {% if item.rsvp_url and item.event_date %}
                {% assign event_date = item.event_date | date: "%s" %}
                {% assign current_date = site.time | date: "%s" %}
                {% if current_date <= event_date %}
                  <p><a href="{{ item.rsvp_url }}" class="mono text-xs text-gray-500 hover:text-black">RSVP →</a></p>
                {% endif %}
              {% endif %}
            {% endif %}

            <!-- Link -->
            <p><a href="{% if item.custom_url %}{{ item.custom_url | relative_url }}{% else %}{{ item.url | relative_url }}{% endif %}" class="mono text-xs text-gray-500 hover:text-black">Learn more →</a></p>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>
